<% layout('panel') -%>


<div class="col-md-3">
    <div class="card card-primary card-outline">
        <div class="card-body box-profile">
            <div class="text-center">
                <img class="profile-user-img img-fluid img-circle" src="/profiles/<%= patient.Photo %>"
                     alt="User profile picture">
            </div>

            <h3 class="profile-username text-center"><%= patient.Name %></h3>

            <p class="text-muted text-center">Software Engineer</p>

            <ul class="list-group list-group-unbordered mb-3">
                <li class="list-group-item">
                    <b>Birthdate</b> <a class="float-right"><%= patient.Birthdate %></a>
                </li>
                <li class="list-group-item">
                    <b>Phone</b> <a class="float-right"><%= patient.Phone %></a>
                </li>
                <li class="list-group-item">
                    <b>Address</b> <a class="float-right"><%= patient.Address %></a>
                </li>
                <li class="list-group-item">
                    <b>Email</b> <a class="float-right"><%= patient.Email %></a>
                </li>
                <li class="list-group-item">
                    <b>Insurance</b> <a class="float-right">
                        <% if (patient.Insurance){ %>
                            Yes
                        <% } else { %>
                            No
                        <% } %>
                    </a>
                </li>

            </ul>

            <a href="/patient/scans/<%= patient.id %>" class="btn btn-primary btn-block"><b>Scans</b></a>
            <a href="/doctor/addhistory/<%= patient.id %>" class="btn btn-primary btn-block"><b>Add History</b></a>
        </div>
        <!-- /.card-body -->
    </div>
</div>

<% block('css').append('<link rel="stylesheet" href="../plugins/datatables-bs4/css/dataTables.bootstrap4.css"></script>') %>
<div class="card card-primary col-md-9">
    <div class="card-header">
        <h3 class="card-title">Histories Available</h3>
        <!-- /.card-tools -->
    </div>
    <!-- /.card-header -->

    <div class="card-body ">
        <table id="example2" class="table table-bordered table-hover" role="grid" aria-describedby="example2_info">
            <thead>
            <tr role="row">
                <th>#</th>
                <th>Diagnosis</th>
                <th>Date</th>
            </thead>
            <tbody>
            <% history.forEach(hist =>  { %>
                <tr role="row" class="odd">
                    <td><%= hist.id %></td>
                    <td><%= hist.Diagnosis %></td>
                    <td> <%= hist.DiagnosisDate %></td>
                </tr>
            <% }); %>

            </tbody>
        </table>
    </div>
    <!-- /.card-body -->
</div>
<!-- include sorting in any table -->
<% block('js').append('<script src="/plugins/datatables/jquery.dataTables.js"></script>') %>
<% block('js').append('<script src="/plugins/datatables-bs4/js/dataTables.bootstrap4.js"></script>') %>
<% block('js').append('<script> $(function () {$("#example2").DataTable();})</script>') %>

